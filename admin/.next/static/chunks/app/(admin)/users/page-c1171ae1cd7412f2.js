(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{1418:function(e,a,s){Promise.resolve().then(s.bind(s,5784))},5784:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return n}});var t=s(7437),r=s(2265),d=s(5864);function n(){let[e,a]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(null);(0,r.useEffect)(()=>{d.Nq.getUsers().then(e=>{var s,t;(null===(s=e.data)||void 0===s?void 0:s.success)&&(null===(t=e.data)||void 0===t?void 0:t.data)&&a(e.data.data)}).catch(e=>{var a,s;return l((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to load users")}).finally(()=>n(!1))},[]);let c=async(e,s)=>{if(confirm('Delete user "'.concat(s,'"? This cannot be undone.')))try{await d.Nq.deleteUser(e),a(a=>a.filter(a=>a._id!==e))}catch(e){var t,r;alert((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Failed to delete user")}},o=e=>e?new Date(e).toLocaleDateString():"-";return s?(0,t.jsx)("div",{className:"loading-state",children:"Loading users..."}):i?(0,t.jsx)("div",{className:"error-state",children:i}):(0,t.jsxs)("div",{className:"users-page",children:[(0,t.jsx)("div",{className:"table-container-desktop",children:(0,t.jsxs)("table",{className:"admin-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Email"}),(0,t.jsx)("th",{children:"Phone"}),(0,t.jsx)("th",{children:"Role"}),(0,t.jsx)("th",{children:"Joined"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:0===e.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,children:"No users found."})}):e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:e.name||"-"})}),(0,t.jsx)("td",{children:e.email||"-"}),(0,t.jsx)("td",{children:e.phone||"-"}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge badge-role",children:e.role||"user"})}),(0,t.jsx)("td",{children:o(e.createdAt)}),(0,t.jsx)("td",{children:(0,t.jsx)("button",{type:"button",className:"btn-sm btn-danger",onClick:()=>c(e._id,e.name),children:"Delete"})})]},e._id))})]})}),(0,t.jsx)("div",{className:"cards-container-mobile",children:0===e.length?(0,t.jsx)("div",{className:"empty-state",children:"No users found."}):e.map(e=>(0,t.jsxs)("div",{className:"user-card",children:[(0,t.jsxs)("div",{className:"card-header",children:[(0,t.jsx)("h3",{children:e.name||"-"}),(0,t.jsx)("span",{className:"badge badge-role",children:e.role||"user"})]}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"card-row",children:[(0,t.jsx)("span",{className:"card-label",children:"Email:"}),(0,t.jsx)("span",{className:"card-value",children:e.email||"-"})]}),(0,t.jsxs)("div",{className:"card-row",children:[(0,t.jsx)("span",{className:"card-label",children:"Phone:"}),(0,t.jsx)("span",{className:"card-value",children:e.phone||"-"})]}),(0,t.jsxs)("div",{className:"card-row",children:[(0,t.jsx)("span",{className:"card-label",children:"Joined:"}),(0,t.jsx)("span",{className:"card-value",children:o(e.createdAt)})]})]}),(0,t.jsx)("div",{className:"card-footer",children:(0,t.jsx)("button",{type:"button",className:"btn-sm btn-danger",onClick:()=>c(e._id,e.name),children:"Delete User"})})]},e._id))})]})}},5864:function(e,a,s){"use strict";s.d(a,{Nq:function(){return n}});let t=s(3464).Z.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}}),r=["/admin/auth/me","/admin/dashboard","/admin/products","/admin/orders","/admin/users"],d=e=>r.some(a=>null==e?void 0:e.includes(a));t.interceptors.request.use(e=>{{let a=localStorage.getItem("adminToken");if(d(e.url)&&!a)return window.location.href="/login",Promise.reject(Error("Admin authentication required"));a&&(e.headers.Authorization="Bearer ".concat(a))}return e}),t.interceptors.response.use(e=>e,e=>{var a;let s=null===(a=e.response)||void 0===a?void 0:a.status;return(401===s||403===s)&&(localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),window.location.href="/login"),Promise.reject(e)});let n={login:(e,a)=>t.post("/admin/auth/login",{email:e,password:a}),getMe:()=>t.get("/admin/auth/me"),getStats:()=>t.get("/admin/dashboard/stats"),getProducts:()=>t.get("/admin/products"),createProduct:e=>t.post("/admin/products",e),updateProduct:(e,a)=>t.put("/admin/products/".concat(e),a),deleteProduct:e=>t.delete("/admin/products/".concat(e)),getOrders:e=>t.get("/admin/orders",{params:e}),updateOrderStatus:(e,a)=>t.put("/admin/orders/".concat(e),a),verifyOrder:(e,a)=>t.patch("/admin/orders/".concat(e,"/verify"),{status:a}),deleteOrder:e=>t.delete("/admin/orders/".concat(e)),getUsers:()=>t.get("/admin/users"),updateUser:(e,a)=>t.put("/admin/users/".concat(e),a),deleteUser:e=>t.delete("/admin/users/".concat(e))}}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=1418)}),_N_E=e.O()}]);