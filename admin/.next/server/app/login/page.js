(()=>{var e={};e.id=626,e.ids=[626],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},1854:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>l}),r(7701),r(1840),r(5866);var s=r(3191),i=r(8716),a=r(7922),n=r.n(a),o=r(5231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let l=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7701)),"C:\\rizwans-desi-ghee\\admin\\src\\app\\login\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1840)),"C:\\rizwans-desi-ghee\\admin\\src\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\rizwans-desi-ghee\\admin\\src\\app\\login\\page.jsx"],c="/login/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},3080:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},1172:(e,t,r)=>{Promise.resolve().then(r.bind(r,4929))},9605:(e,t,r)=>{Promise.resolve().then(r.bind(r,8728))},5047:(e,t,r)=>{"use strict";var s=r(7389);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},4929:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(326),i=r(7577),a=r(5047),n=r(8728);function o(){let e=(0,a.useRouter)(),{login:t,isAuthenticated:r,loading:o}=(0,n.a)(),[d,l]=(0,i.useState)(""),[u,c]=(0,i.useState)(""),[m,p]=(0,i.useState)(""),[g,h]=(0,i.useState)(!1),x=async r=>{r.preventDefault(),p(""),h(!0);try{let r=await t(d.trim(),u);r?.success?e.replace("/dashboard"):p(r?.message??r?.error??"Invalid credentials")}catch(e){p(e.response?.data?.message||"Login failed. Please try again.")}finally{h(!1)}};return o?s.jsx("main",{className:"login-page",children:s.jsx("div",{className:"login-container",children:s.jsx("p",{children:"Loading..."})})}):s.jsx("main",{className:"login-page",children:(0,s.jsxs)("div",{className:"login-container",children:[s.jsx("h1",{children:"Admin Login"}),s.jsx("p",{className:"login-subtitle",children:"Rizwan's Desi Ghee"}),(0,s.jsxs)("form",{onSubmit:x,children:[m&&s.jsx("div",{className:"login-error",children:m}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"email",children:"Email"}),s.jsx("input",{id:"email",type:"email",name:"email",value:d,onChange:e=>l(e.target.value),required:!0,autoComplete:"email",disabled:g})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"password",children:"Password"}),s.jsx("input",{id:"password",type:"password",name:"password",value:u,onChange:e=>c(e.target.value),required:!0,autoComplete:"current-password",disabled:g})]}),s.jsx("button",{type:"submit",disabled:g,children:g?"Signing in...":"Login"})]})]})})}},8728:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>o,a:()=>d});var s=r(326),i=r(7577),a=r(8866);let n=(0,i.createContext)(null);function o({children:e}){let[t,r]=(0,i.useState)(null),[o,d]=(0,i.useState)(!0),l=(0,i.useCallback)(()=>null,[]),u=(0,i.useCallback)(()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),r(null)},[]);(0,i.useCallback)(async()=>{if(!l()){d(!1);return}try{let e=await a.Nq.getMe(),t=e?.data,s=t?.data;if(!t?.success||!s){u();return}let i=(s.role||"").toLowerCase();if("admin"!==i&&"superadmin"!==i){u();return}r(s),localStorage.setItem("adminUser",JSON.stringify(s))}catch{u()}finally{d(!1)}},[l,u]);let c=async(e,t)=>{try{let s=await a.Nq.login(e,t),i=s?.data,n=i?.data;if(console.log("Login Response:",{success:i?.success,role:n?.admin?.role}),!i?.success||!n?.token||!n?.admin)return{success:!1,message:i?.message??"Login failed"};let o=String(n.admin?.role||"").toLowerCase();if("admin"!==o&&"superadmin"!==o)return console.error("Access Denied: Invalid role",o),{success:!1,message:"Access denied. Admin or superadmin role required."};return localStorage.setItem("adminToken",n.token),localStorage.setItem("adminUser",JSON.stringify(n.admin)),r(n.admin),{success:!0}}catch(e){return{success:!1,message:e?.response?.data?.message??e?.message??"Login failed"}}},m=!!t&&("admin"===t.role||"superadmin"===t.role);return s.jsx(n.Provider,{value:{admin:t,loading:o,login:c,logout:u,isAuthenticated:m},children:e})}function d(){let e=(0,i.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},8866:(e,t,r)=>{"use strict";r.d(t,{Nq:()=>i});let s=r(4464).Z.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>e),s.interceptors.response.use(e=>e,e=>(e.response?.status,Promise.reject(e)));let i={login:(e,t)=>s.post("/admin/auth/login",{email:e,password:t}),getMe:()=>s.get("/admin/auth/me"),getStats:()=>s.get("/admin/dashboard/stats"),getProducts:()=>s.get("/admin/products"),createProduct:e=>s.post("/admin/products",e),updateProduct:(e,t)=>s.put(`/admin/products/${e}`,t),deleteProduct:e=>s.delete(`/admin/products/${e}`),getOrders:e=>s.get("/admin/orders",{params:e}),updateOrderStatus:(e,t)=>s.put(`/admin/orders/${e}`,t),verifyOrder:(e,t)=>s.patch(`/admin/orders/${e}/verify`,{status:t}),deleteOrder:e=>s.delete(`/admin/orders/${e}`),getUsers:()=>s.get("/admin/users"),updateUser:(e,t)=>s.put(`/admin/users/${e}`,t),deleteUser:e=>s.delete(`/admin/users/${e}`)}},1840:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>n});var s=r(9510);r(4544);var i=r(8570);let a=(0,i.createProxy)(String.raw`C:\rizwans-desi-ghee\admin\src\context\AuthContext.jsx#AuthProvider`);(0,i.createProxy)(String.raw`C:\rizwans-desi-ghee\admin\src\context\AuthContext.jsx#useAuth`);let n={title:"Admin Panel - Rizwan's Desi Ghee",description:"Admin dashboard for managing e-commerce platform"};function o({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:s.jsx(a,{children:e})})})}},7701:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\rizwans-desi-ghee\admin\src\app\login\page.jsx#default`)},4544:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[294],()=>r(1854));module.exports=s})();