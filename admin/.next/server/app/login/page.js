(()=>{var e={};e.id=626,e.ids=[626],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},5636:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>l}),s(7701),s(1840),s(5866);var t=s(3191),i=s(8716),a=s(7922),n=s.n(a),o=s(5231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);s.d(r,d);let l=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7701)),"C:\\Users\\sc\\rizwans-desi-ghee\\admin\\src\\app\\login\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1840)),"C:\\Users\\sc\\rizwans-desi-ghee\\admin\\src\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\sc\\rizwans-desi-ghee\\admin\\src\\app\\login\\page.jsx"],c="/login/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},8849:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},8824:(e,r,s)=>{Promise.resolve().then(s.bind(s,4929))},8012:(e,r,s)=>{Promise.resolve().then(s.bind(s,8728))},5047:(e,r,s)=>{"use strict";var t=s(7389);s.o(t,"usePathname")&&s.d(r,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}})},4929:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>o});var t=s(326),i=s(7577),a=s(5047),n=s(8728);function o(){let e=(0,a.useRouter)(),{login:r,isAuthenticated:s,loading:o}=(0,n.a)(),[d,l]=(0,i.useState)(""),[u,c]=(0,i.useState)(""),[m,p]=(0,i.useState)(""),[g,h]=(0,i.useState)(!1),x=async s=>{s.preventDefault(),p(""),h(!0);try{let s=await r(d.trim(),u);s?.success?e.replace("/dashboard"):p(s?.message??s?.error??"Invalid credentials")}catch(e){p(e.response?.data?.message||"Login failed. Please try again.")}finally{h(!1)}};return o?t.jsx("main",{className:"login-page",children:t.jsx("div",{className:"login-container",children:t.jsx("p",{children:"Loading..."})})}):t.jsx("main",{className:"login-page",children:(0,t.jsxs)("div",{className:"login-container",children:[t.jsx("h1",{children:"Admin Login"}),t.jsx("p",{className:"login-subtitle",children:"Rizwan's Desi Ghee"}),(0,t.jsxs)("form",{onSubmit:x,children:[m&&t.jsx("div",{className:"login-error",children:m}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"email",children:"Email"}),t.jsx("input",{id:"email",type:"email",name:"email",value:d,onChange:e=>l(e.target.value),required:!0,autoComplete:"email",disabled:g})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"password",children:"Password"}),t.jsx("input",{id:"password",type:"password",name:"password",value:u,onChange:e=>c(e.target.value),required:!0,autoComplete:"current-password",disabled:g})]}),t.jsx("button",{type:"submit",disabled:g,children:g?"Signing in...":"Login"})]})]})})}},8728:(e,r,s)=>{"use strict";s.d(r,{AuthProvider:()=>o,a:()=>d});var t=s(326),i=s(7577),a=s(8866);let n=(0,i.createContext)(null);function o({children:e}){let[r,s]=(0,i.useState)(null),[o,d]=(0,i.useState)(!0),l=(0,i.useCallback)(()=>null,[]),u=(0,i.useCallback)(()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),s(null)},[]);(0,i.useCallback)(async()=>{if(!l()){d(!1);return}try{let e=await a.Nq.getMe(),r=e?.data,t=r?.data;if(!r?.success||!t){u();return}let i=(t.role||"").toLowerCase();if("admin"!==i&&"superadmin"!==i){u();return}s(t),localStorage.setItem("adminUser",JSON.stringify(t))}catch{u()}finally{d(!1)}},[l,u]);let c=async(e,r)=>{try{let t=await a.Nq.login(e,r),i=t?.data,n=i?.data;if(console.log("Login Response:",{success:i?.success,role:n?.admin?.role}),!i?.success||!n?.token||!n?.admin)return{success:!1,message:i?.message??"Login failed"};let o=String(n.admin?.role||"").toLowerCase();if("admin"!==o&&"superadmin"!==o)return console.error("Access Denied: Invalid role",o),{success:!1,message:"Access denied. Admin or superadmin role required."};return localStorage.setItem("adminToken",n.token),localStorage.setItem("adminUser",JSON.stringify(n.admin)),s(n.admin),{success:!0}}catch(e){return{success:!1,message:e?.response?.data?.message??e?.message??"Login failed"}}},m=!!r&&("admin"===r.role||"superadmin"===r.role);return t.jsx(n.Provider,{value:{admin:r,loading:o,login:c,logout:u,isAuthenticated:m},children:e})}function d(){let e=(0,i.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},8866:(e,r,s)=>{"use strict";s.d(r,{Nq:()=>n});var t=s(4464);let i=process.env.NEXT_PUBLIC_API_URL||"https://rizwans-desi-ghee-backend.onrender.com/api",a=t.Z.create({baseURL:i,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>e),a.interceptors.response.use(e=>e,e=>(e.response?.status,Promise.reject(e)));let n={login:(e,r)=>a.post("/admin/auth/login",{email:e,password:r}),getMe:()=>a.get("/admin/auth/me"),getStats:()=>a.get("/admin/dashboard/stats"),getProducts:()=>a.get("/admin/products"),createProduct:e=>a.post("/admin/products",e),updateProduct:(e,r)=>a.put(`/admin/products/${e}`,r),deleteProduct:e=>a.delete(`/admin/products/${e}`),getOrders:e=>a.get("/admin/orders",{params:e}),updateOrderStatus:(e,r)=>a.put(`/admin/orders/${e}`,r),verifyOrder:(e,r)=>a.patch(`/admin/orders/${e}/verify`,{status:r}),deleteOrder:e=>a.delete(`/admin/orders/${e}`),getUsers:()=>a.get("/admin/users"),updateUser:(e,r)=>a.put(`/admin/users/${e}`,r),deleteUser:e=>a.delete(`/admin/users/${e}`)}},1840:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>o,metadata:()=>n});var t=s(9510);s(4544);var i=s(8570);let a=(0,i.createProxy)(String.raw`C:\Users\sc\rizwans-desi-ghee\admin\src\context\AuthContext.jsx#AuthProvider`);(0,i.createProxy)(String.raw`C:\Users\sc\rizwans-desi-ghee\admin\src\context\AuthContext.jsx#useAuth`);let n={title:"Admin Panel - Rizwan's Desi Ghee",description:"Admin dashboard for managing e-commerce platform"};function o({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{children:t.jsx(a,{children:e})})})}},7701:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(8570).createProxy)(String.raw`C:\Users\sc\rizwans-desi-ghee\admin\src\app\login\page.jsx#default`)},4544:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[294],()=>s(5636));module.exports=t})();