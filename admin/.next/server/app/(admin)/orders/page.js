(()=>{var e={};e.id=30,e.ids=[30],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},860:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),a(6920),a(2146),a(5866),a(1840);var t=a(3191),r=a(8716),i=a(7922),n=a.n(i),d=a(5231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);a.d(s,l);let c=["",{children:["(admin)",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,6920)),"C:\\Users\\sc\\rizwans-desi-ghee\\admin\\src\\app\\(admin)\\orders\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,2146)),"C:\\Users\\sc\\rizwans-desi-ghee\\admin\\src\\app\\(admin)\\layout.jsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,1840)),"C:\\Users\\sc\\rizwans-desi-ghee\\admin\\src\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\sc\\rizwans-desi-ghee\\admin\\src\\app\\(admin)\\orders\\page.jsx"],m="/(admin)/orders/page",u={require:a,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(admin)/orders/page",pathname:"/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8849:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},7173:(e,s,a)=>{Promise.resolve().then(a.bind(a,7201))},3442:(e,s,a)=>{Promise.resolve().then(a.bind(a,4292))},8012:(e,s,a)=>{Promise.resolve().then(a.bind(a,8728))},7201:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var t=a(326),r=a(7577),i=a(5047),n=a(434),d=a(8728);a(8866);let l=[{href:"/dashboard",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/products",label:"Products",icon:"\uD83D\uDCE6"},{href:"/orders",label:"Orders",icon:"\uD83D\uDED2",badgeKey:"orders"},{href:"/users",label:"Users",icon:"\uD83D\uDC65"}];function c({children:e}){(0,i.useRouter)();let s=(0,i.usePathname)(),{admin:a,loading:c,logout:o,isAuthenticated:m}=(0,d.a)(),[u,h]=(0,r.useState)(!1),{pendingCount:p,showNewOrderToast:x,dismissToast:j}=function(){let[e,s]=(0,r.useState)(0),[a,t]=(0,r.useState)(!1);return(0,r.useRef)(null),(0,r.useRef)(!0),{pendingCount:e,showNewOrderToast:a,dismissToast:()=>t(!1)}}();return c?t.jsx("div",{className:"admin-loading",children:t.jsx("p",{children:"Loading..."})}):m?(0,t.jsxs)("div",{className:"admin-layout",children:[u&&t.jsx("div",{className:"sidebar-overlay",onClick:()=>h(!1),"aria-hidden":"true"}),(0,t.jsxs)("aside",{className:`sidebar ${u?"open":""}`,children:[(0,t.jsxs)("div",{className:"sidebar-header",children:[t.jsx("h2",{children:"Rizwan's Ghee"}),t.jsx("span",{className:"sidebar-subtitle",children:"Admin Panel"}),t.jsx("button",{type:"button",className:"sidebar-close-btn",onClick:()=>h(!1),"aria-label":"Close menu",children:"✕"})]}),t.jsx("nav",{className:"sidebar-nav",children:l.map(e=>(0,t.jsxs)(n.default,{href:e.href,className:s===e.href?"active":"",children:[t.jsx("span",{className:"nav-icon",children:e.icon}),t.jsx("span",{className:"nav-label",children:e.label}),"orders"===e.badgeKey&&p>0&&t.jsx("span",{className:"nav-badge","aria-label":`${p} new order${1!==p?"s":""}`,children:p})]},e.href))}),(0,t.jsxs)("div",{className:"sidebar-footer",children:[t.jsx("div",{className:"admin-info",children:t.jsx("span",{className:"admin-email",children:a?.email})}),t.jsx("button",{type:"button",className:"logout-btn",onClick:o,children:"Logout"})]})]}),(0,t.jsxs)("main",{className:"admin-main",children:[(0,t.jsxs)("header",{className:"admin-header",children:[t.jsx("button",{type:"button",className:"mobile-menu-btn",onClick:()=>h(!u),"aria-label":"Toggle menu",children:"☰"}),t.jsx("h1",{className:"page-title",children:l.find(e=>e.href===s)?.label||"Admin"})]}),t.jsx("div",{className:"admin-content",children:e})]}),x&&(0,t.jsxs)("div",{className:"new-order-toast",role:"alert",children:[t.jsx("span",{className:"new-order-toast-icon",children:"✓"}),(0,t.jsxs)("span",{className:"new-order-toast-text",children:["New order placed! ",p," pending order",1!==p?"s":""," need attention."]}),t.jsx("button",{type:"button",className:"new-order-toast-close",onClick:j,"aria-label":"Dismiss",children:"✕"})]})]}):null}},4292:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>h});var t=a(326),r=a(7577),i=a(8866);function n({order:e,onUpdate:s}){var a,i;let n,d;let[l,c]=(0,r.useState)(!1),o=(a=e.shippingAddress,i=e.user,a||i?{name:a?.name||i?.name,email:a?.email||i?.email,phone:a?.phone||i?.phone}:"-");return(0,t.jsxs)("div",{className:"order-card",children:[(0,t.jsxs)("div",{className:"order-card-header",children:[(0,t.jsxs)("div",{className:"order-card-id-amount",children:[(0,t.jsxs)("div",{className:"order-id",children:["Order #",e._id?.slice(-8)]}),t.jsx("div",{className:"order-amount",children:(n=e.totalAmount,`Rs. ${Number(n||0).toLocaleString()}`)})]}),t.jsx("div",{className:"order-date",children:(d=e.createdAt)?new Date(d).toLocaleDateString():"-"})]}),(0,t.jsxs)("div",{className:"order-card-section",children:[t.jsx("div",{className:"section-title",children:"Customer"}),(0,t.jsxs)("div",{className:"customer-info",children:[t.jsx("div",{className:"customer-name",children:o.name||"-"}),t.jsx("div",{className:"customer-email",children:o.email||"-"}),t.jsx("div",{className:"customer-phone",children:o.phone||"-"})]})]}),e.shippingAddress&&(0,t.jsxs)("div",{className:"order-card-section",children:[t.jsx("div",{className:"section-title",children:"Shipping Address"}),(0,t.jsxs)("div",{className:"address-info",children:[t.jsx("div",{children:e.shippingAddress.address}),(0,t.jsxs)("div",{children:[e.shippingAddress.city,", ",e.shippingAddress.state," ",e.shippingAddress.zipCode]})]})]}),(0,t.jsxs)("div",{className:"order-card-section",children:[(0,t.jsxs)("div",{className:"section-title",children:["Items (",e.items?.length||0,")"]}),t.jsx("div",{className:"items-list",children:e.items?.map((e,s)=>t.jsxs("div",{className:"item-row",children:[t.jsx("div",{className:"item-name",children:e.product?.name||e.product}),t.jsxs("div",{className:"item-qty",children:["x",e.quantity]}),t.jsxs("div",{className:"item-price",children:["Rs. ",Number(e.price||0).toLocaleString()]})]},s))})]}),(0,t.jsxs)("div",{className:"order-card-section",children:[t.jsx("div",{className:"section-title",children:"Payment"}),(0,t.jsxs)("div",{className:"payment-info",children:[(0,t.jsxs)("div",{className:"payment-method",children:[t.jsx("span",{className:"label",children:"Method:"}),t.jsx("span",{className:"badge badge-pending",children:"ONLINE"===e.paymentMethod?"Online":"COD"})]}),(0,t.jsxs)("div",{className:"payment-status",children:[t.jsx("span",{className:"label",children:"Status:"}),t.jsx("span",{className:`badge badge-payment-${e.paymentStatus||"pending"}`,children:e.paymentStatus||"pending"})]}),"ONLINE"===e.paymentMethod&&(0,t.jsxs)("div",{className:"payment-verification",children:[t.jsx("span",{className:"label",children:"Verification:"}),t.jsx("span",{className:`badge badge-verification-${e.paymentVerificationStatus||"pending"}`,children:e.paymentVerificationStatus||"pending"})]}),(e.paymentProof?.data||e.paymentScreenshot)&&t.jsx("div",{className:"payment-screenshot",children:t.jsx("a",{href:e.paymentProof?.data||e.paymentScreenshot,target:"_blank",rel:"noreferrer",className:"screenshot-link",children:"View Receipt"})})]})]}),(0,t.jsxs)("div",{className:"order-card-section",children:[t.jsx("div",{className:"section-title",children:"Status"}),t.jsx("div",{className:"status-badges",children:t.jsx("span",{className:`badge badge-${e.status}`,children:e.status})})]}),t.jsx("div",{className:"order-card-footer",children:t.jsx("button",{type:"button",className:"btn-sm btn-primary",onClick:()=>s(e),children:"Update Order"})})]})}function d({imageUrl:e,onClose:s}){let[a,i]=(0,r.useState)(!0);return t.jsx("div",{className:"modal-overlay",onClick:s,children:(0,t.jsxs)("div",{className:"image-modal",onClick:e=>e.stopPropagation(),children:[t.jsx("button",{type:"button",className:"modal-close",onClick:s,"aria-label":"Close",children:"✕"}),(0,t.jsxs)("div",{className:"image-container",children:[a&&t.jsx("div",{className:"image-loading",children:"Loading image..."}),t.jsx("img",{src:e,alt:"Payment proof",onLoad:()=>i(!1),className:a?"hidden":""})]})]})})}let l=["pending","processing","shipped","delivered","cancelled"],c=["pending","paid","unverified","failed"],o=["unverified","paid","failed"],m=["pending","verified","rejected"];function u({order:e,onClose:s,onSuccess:a}){let[n,u]=(0,r.useState)(e?.status||""),[h,p]=(0,r.useState)(e?.paymentStatus||""),[x,j]=(0,r.useState)(e?.paymentVerificationStatus||""),[g,v]=(0,r.useState)(!1),[b,N]=(0,r.useState)(""),[y,f]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),P=async s=>{if(s.preventDefault(),!n&&!h&&!x){N("Update at least one field");return}N(""),v(!0);try{let s={};n&&(s.status=n),h&&(s.paymentStatus=h),x&&(s.paymentVerificationStatus=x),await i.Nq.updateOrderStatus(e._id,s),a?.()}catch(e){N(e.response?.data?.message||"Failed to update")}finally{v(!1)}},A=async()=>{if(confirm("Are you sure you want to delete this order? This cannot be undone.")){N(""),C(!0);try{await i.Nq.deleteOrder(e._id),a?.()}catch(e){N(e.response?.data?.message||"Failed to delete order"),C(!1)}}};return(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"modal-overlay",onClick:s,children:(0,t.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsxs)("h3",{children:["Update Order #",e?._id?.slice(-8)]}),t.jsx("button",{type:"button",className:"modal-close",onClick:s,"aria-label":"Close",children:"✕"})]}),(0,t.jsxs)("form",{onSubmit:P,className:"modal-body",children:[b&&t.jsx("div",{className:"form-error",children:b}),e.shippingAddress&&(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{children:"Shipping Information"}),(0,t.jsxs)("div",{className:"read-only-text",children:[t.jsx("div",{children:t.jsx("strong",{children:e.shippingAddress.name})}),t.jsx("div",{children:e.shippingAddress.address}),(0,t.jsxs)("div",{children:[e.shippingAddress.city,", ",e.shippingAddress.state," ",e.shippingAddress.zipCode]}),(0,t.jsxs)("div",{children:["Phone: ",e.shippingAddress.phone]}),(0,t.jsxs)("div",{children:["Email: ",e.shippingAddress.email]})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{children:["Items (",e.items?.length||0,")"]}),t.jsx("div",{className:"space-y-2",children:e.items?.map((e,s)=>t.jsxs("div",{className:"item-summary",children:[t.jsx("div",{children:e.product?.name||e.product}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{children:["Qty: ",e.quantity]}),t.jsx("div",{children:(e.product?.name,"")}),t.jsxs("div",{className:"item-price",children:["Rs. ",Number(e.price||0).toLocaleString()]})]})]},s))})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{children:"Order Status"}),(0,t.jsxs)("select",{value:n,onChange:e=>u(e.target.value),children:[t.jsx("option",{value:"",children:"Select status..."}),l.map(e=>t.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]}),"ONLINE"!==e.paymentMethod&&(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{children:"Payment Status"}),(0,t.jsxs)("select",{value:h,onChange:e=>p(e.target.value),children:[t.jsx("option",{value:"",children:"Select payment status..."}),c.map(e=>t.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),t.jsx("small",{children:'Mark "paid" when customer pays on delivery.'})]}),"ONLINE"===e.paymentMethod&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{children:"Payment Status"}),(0,t.jsxs)("select",{value:h,onChange:e=>p(e.target.value),children:[t.jsx("option",{value:"",children:"Select payment status..."}),o.map(e=>t.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),t.jsx("small",{children:'Set to "Paid" after verifying the payment screenshot.'})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{children:"Payment Verification"}),(0,t.jsxs)("select",{value:x,onChange:e=>j(e.target.value),children:[t.jsx("option",{value:"",children:"Select verification status..."}),m.map(e=>t.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),t.jsx("small",{children:"Verify or reject uploaded payment screenshots."})]})]}),(e.paymentProof?.data||e.paymentScreenshot)&&(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{children:"Payment Proof"}),(0,t.jsxs)("button",{type:"button",className:"screenshot-button",onClick:()=>f(!0),children:[t.jsx("img",{src:e.paymentProof?.data||e.paymentScreenshot,alt:"payment",className:"screenshot-thumb"}),t.jsx("span",{children:"Click to view full size"})]})]}),(0,t.jsxs)("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",className:"btn-secondary btn-danger-secondary",onClick:A,disabled:S,children:S?"Deleting...":"Delete Order"}),(0,t.jsxs)("div",{style:{marginLeft:"auto",display:"flex",gap:"12px"},children:[t.jsx("button",{type:"button",className:"btn-secondary",onClick:s,children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn-primary",disabled:g,children:g?"Updating...":"Update"})]})]})]})]})}),y&&t.jsx(d,{imageUrl:e.paymentProof?.data||e.paymentScreenshot,onClose:()=>f(!1)})]})}function h(){let[e,s]=(0,r.useState)([]),[a,l]=(0,r.useState)({}),[c,o]=(0,r.useState)(!0),[m,h]=(0,r.useState)(null),[p,x]=(0,r.useState)(""),[j,g]=(0,r.useState)(""),[v,b]=(0,r.useState)(1),[N,y]=(0,r.useState)(null),[f,S]=(0,r.useState)(!1),C=(0,r.useCallback)((e=1)=>{o(!0);let a={page:e,limit:20};p&&(a.status=p),j&&(a.paymentStatus=j),i.Nq.getOrders(a).then(e=>{e.data?.success&&(s(e.data.data||[]),l(e.data.meta||{}))}).catch(e=>h(e.response?.data?.message||"Failed to load orders")).finally(()=>o(!1))},[p,j]),P=e=>{e>=1&&e<=(a.pages||1)&&(b(e),C(e))},A=async(e,s)=>{try{await i.Nq.verifyOrder(e,s),C(v)}catch(e){alert(e.response?.data?.message||"Failed to verify order")}};return c&&0===e.length?t.jsx("div",{className:"loading-state",children:"Loading orders..."}):m&&0===e.length?t.jsx("div",{className:"error-state",children:m}):(0,t.jsxs)("div",{className:"orders-page",children:[(0,t.jsxs)("div",{className:"filters-section",children:[(0,t.jsxs)("div",{className:"filter-group",children:[t.jsx("label",{children:"Status:"}),(0,t.jsxs)("select",{value:p,onChange:e=>x(e.target.value),children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"processing",children:"Processing"}),t.jsx("option",{value:"shipped",children:"Shipped"}),t.jsx("option",{value:"delivered",children:"Delivered"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,t.jsxs)("div",{className:"filter-group",children:[t.jsx("label",{children:"Payment Status:"}),(0,t.jsxs)("select",{value:j,onChange:e=>g(e.target.value),children:[t.jsx("option",{value:"",children:"All Payments"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"paid",children:"Paid"}),t.jsx("option",{value:"failed",children:"Failed"})]})]})]}),0===e.length?(0,t.jsxs)("div",{className:"empty-state",children:[t.jsx("div",{className:"empty-icon",children:"\uD83D\uDCED"}),t.jsx("h3",{children:"No orders found"}),t.jsx("p",{children:"Try adjusting your filters or check back later."})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"orders-cards",children:e.map(e=>t.jsx(n,{order:e,onUpdate:y},e._id))}),t.jsx("div",{className:"orders-table",children:t.jsx("div",{className:"table-container",children:(0,t.jsxs)("table",{className:"admin-table",children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{children:[t.jsx("th",{children:"Order ID"}),t.jsx("th",{children:"Customer"}),t.jsx("th",{children:"Items"}),t.jsx("th",{children:"Total"}),t.jsx("th",{children:"Payment"}),t.jsx("th",{children:"Status"}),t.jsx("th",{children:"Verification"}),t.jsx("th",{children:"Date"}),t.jsx("th",{children:"Actions"})]})}),t.jsx("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[t.jsx("td",{children:t.jsx("code",{children:e._id?.slice(-8)})}),t.jsx("td",{children:(0,t.jsxs)("div",{children:[t.jsx("strong",{children:e.shippingAddress?.name||e.user?.name||"-"}),t.jsx("br",{}),t.jsx("small",{children:e.shippingAddress?.phone||e.user?.phone||"-"})]})}),t.jsx("td",{children:e.items?.length||0}),(0,t.jsxs)("td",{children:["Rs. ",Number(e.totalAmount||0).toLocaleString()]}),(0,t.jsxs)("td",{children:[t.jsx("span",{className:"badge badge-pending",children:"ONLINE"===e.paymentMethod?"Online":"COD"}),"ONLINE"===e.paymentMethod&&(e.paymentProof?.data||e.paymentScreenshot)&&(0,t.jsxs)("div",{style:{marginTop:"8px",display:"flex",flexDirection:"column",gap:"4px"},children:[t.jsx("button",{type:"button",className:"btn-text",onClick:()=>{y(e),S(!0)},children:"View Screenshot"}),"unverified"===e.paymentStatus&&(0,t.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[t.jsx("button",{type:"button",className:"btn-sm btn-success",onClick:()=>A(e._id,"verified"),children:"✅ Paid"}),t.jsx("button",{type:"button",className:"btn-sm btn-danger",onClick:()=>A(e._id,"rejected"),children:"❌ Invalid"})]})]})]}),t.jsx("td",{children:t.jsx("span",{className:`badge badge-${e.status}`,children:e.status})}),t.jsx("td",{children:t.jsx("span",{className:`badge badge-verification-${e.paymentVerificationStatus||"pending"}`,children:e.paymentVerificationStatus||"pending"})}),t.jsx("td",{style:{fontSize:"0.85rem"},children:new Date(e.createdAt).toLocaleDateString()}),t.jsx("td",{children:t.jsx("button",{type:"button",className:"btn-sm btn-primary",onClick:()=>y(e),children:"Update"})})]},e._id))})]})})})]}),a.pages>1&&(0,t.jsxs)("div",{className:"pagination",children:[t.jsx("button",{type:"button",className:"btn-sm",disabled:v<=1||c,onClick:()=>P(v-1),children:"← Previous"}),(0,t.jsxs)("span",{children:["Page ",a.page," of ",a.pages," (",a.total," total)"]}),t.jsx("button",{type:"button",className:"btn-sm",disabled:v>=a.pages||c,onClick:()=>P(v+1),children:"Next →"})]}),N&&!f&&t.jsx(u,{order:N,onClose:()=>y(null),onSuccess:()=>{y(null),S(!1),C(v)}}),N&&f&&t.jsx(d,{imageUrl:N.paymentProof?.data||N.paymentScreenshot,onClose:()=>{y(null),S(!1)}})]})}},8728:(e,s,a)=>{"use strict";a.d(s,{AuthProvider:()=>d,a:()=>l});var t=a(326),r=a(7577),i=a(8866);let n=(0,r.createContext)(null);function d({children:e}){let[s,a]=(0,r.useState)(null),[d,l]=(0,r.useState)(!0),c=(0,r.useCallback)(()=>null,[]),o=(0,r.useCallback)(()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),a(null)},[]);(0,r.useCallback)(async()=>{if(!c()){l(!1);return}try{let e=await i.Nq.getMe(),s=e?.data,t=s?.data;if(!s?.success||!t){o();return}let r=(t.role||"").toLowerCase();if("admin"!==r&&"superadmin"!==r){o();return}a(t),localStorage.setItem("adminUser",JSON.stringify(t))}catch{o()}finally{l(!1)}},[c,o]);let m=async(e,s)=>{try{let t=await i.Nq.login(e,s),r=t?.data,n=r?.data;if(console.log("Login Response:",{success:r?.success,role:n?.admin?.role}),!r?.success||!n?.token||!n?.admin)return{success:!1,message:r?.message??"Login failed"};let d=String(n.admin?.role||"").toLowerCase();if("admin"!==d&&"superadmin"!==d)return console.error("Access Denied: Invalid role",d),{success:!1,message:"Access denied. Admin or superadmin role required."};return localStorage.setItem("adminToken",n.token),localStorage.setItem("adminUser",JSON.stringify(n.admin)),a(n.admin),{success:!0}}catch(e){return{success:!1,message:e?.response?.data?.message??e?.message??"Login failed"}}},u=!!s&&("admin"===s.role||"superadmin"===s.role);return t.jsx(n.Provider,{value:{admin:s,loading:d,login:m,logout:o,isAuthenticated:u},children:e})}function l(){let e=(0,r.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},8866:(e,s,a)=>{"use strict";a.d(s,{Nq:()=>n});var t=a(4464);let r=process.env.NEXT_PUBLIC_API_URL||"https://rizwans-desi-ghee-backend.onrender.com/api",i=t.Z.create({baseURL:r,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>e),i.interceptors.response.use(e=>e,e=>(e.response?.status,Promise.reject(e)));let n={login:(e,s)=>i.post("/admin/auth/login",{email:e,password:s}),getMe:()=>i.get("/admin/auth/me"),getStats:()=>i.get("/admin/dashboard/stats"),getProducts:()=>i.get("/admin/products"),createProduct:e=>i.post("/admin/products",e),updateProduct:(e,s)=>i.put(`/admin/products/${e}`,s),deleteProduct:e=>i.delete(`/admin/products/${e}`),getOrders:e=>i.get("/admin/orders",{params:e}),updateOrderStatus:(e,s)=>i.put(`/admin/orders/${e}`,s),verifyOrder:(e,s)=>i.patch(`/admin/orders/${e}/verify`,{status:s}),deleteOrder:e=>i.delete(`/admin/orders/${e}`),getUsers:()=>i.get("/admin/users"),updateUser:(e,s)=>i.put(`/admin/users/${e}`,s),deleteUser:e=>i.delete(`/admin/users/${e}`)}},2146:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(8570).createProxy)(String.raw`C:\Users\sc\rizwans-desi-ghee\admin\src\app\(admin)\layout.jsx#default`)},6920:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(8570).createProxy)(String.raw`C:\Users\sc\rizwans-desi-ghee\admin\src\app\(admin)\orders\page.jsx#default`)},1840:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d,metadata:()=>n});var t=a(9510);a(4544);var r=a(8570);let i=(0,r.createProxy)(String.raw`C:\Users\sc\rizwans-desi-ghee\admin\src\context\AuthContext.jsx#AuthProvider`);(0,r.createProxy)(String.raw`C:\Users\sc\rizwans-desi-ghee\admin\src\context\AuthContext.jsx#useAuth`);let n={title:"Admin Panel - Rizwan's Desi Ghee",description:"Admin dashboard for managing e-commerce platform"};function d({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{children:t.jsx(i,{children:e})})})}},4544:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[294,496],()=>a(860));module.exports=t})();