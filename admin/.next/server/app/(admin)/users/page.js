(()=>{var e={};e.id=549,e.ids=[549],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},2328:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>o}),r(5935),r(2146),r(5866),r(1840);var a=r(3191),t=r(8716),n=r(7922),i=r.n(n),d=r(5231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(s,l);let o=["",{children:["(admin)",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5935)),"C:\\Users\\sc\\rizwans-desi-ghee\\admin\\src\\app\\(admin)\\users\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2146)),"C:\\Users\\sc\\rizwans-desi-ghee\\admin\\src\\app\\(admin)\\layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1840)),"C:\\Users\\sc\\rizwans-desi-ghee\\admin\\src\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\sc\\rizwans-desi-ghee\\admin\\src\\app\\(admin)\\users\\page.jsx"],u="/(admin)/users/page",m={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(admin)/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8849:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},7173:(e,s,r)=>{Promise.resolve().then(r.bind(r,7201))},9733:(e,s,r)=>{Promise.resolve().then(r.bind(r,8796))},8012:(e,s,r)=>{Promise.resolve().then(r.bind(r,8728))},7201:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var a=r(326),t=r(7577),n=r(5047),i=r(434),d=r(8728);r(8866);let l=[{href:"/dashboard",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/products",label:"Products",icon:"\uD83D\uDCE6"},{href:"/orders",label:"Orders",icon:"\uD83D\uDED2",badgeKey:"orders"},{href:"/users",label:"Users",icon:"\uD83D\uDC65"}];function o({children:e}){(0,n.useRouter)();let s=(0,n.usePathname)(),{admin:r,loading:o,logout:c,isAuthenticated:u}=(0,d.a)(),[m,h]=(0,t.useState)(!1),{pendingCount:p,showNewOrderToast:x,dismissToast:g}=function(){let[e,s]=(0,t.useState)(0),[r,a]=(0,t.useState)(!1);return(0,t.useRef)(null),(0,t.useRef)(!0),{pendingCount:e,showNewOrderToast:r,dismissToast:()=>a(!1)}}();return o?a.jsx("div",{className:"admin-loading",children:a.jsx("p",{children:"Loading..."})}):u?(0,a.jsxs)("div",{className:"admin-layout",children:[m&&a.jsx("div",{className:"sidebar-overlay",onClick:()=>h(!1),"aria-hidden":"true"}),(0,a.jsxs)("aside",{className:`sidebar ${m?"open":""}`,children:[(0,a.jsxs)("div",{className:"sidebar-header",children:[a.jsx("h2",{children:"Rizwan's Ghee"}),a.jsx("span",{className:"sidebar-subtitle",children:"Admin Panel"}),a.jsx("button",{type:"button",className:"sidebar-close-btn",onClick:()=>h(!1),"aria-label":"Close menu",children:"✕"})]}),a.jsx("nav",{className:"sidebar-nav",children:l.map(e=>(0,a.jsxs)(i.default,{href:e.href,className:s===e.href?"active":"",children:[a.jsx("span",{className:"nav-icon",children:e.icon}),a.jsx("span",{className:"nav-label",children:e.label}),"orders"===e.badgeKey&&p>0&&a.jsx("span",{className:"nav-badge","aria-label":`${p} new order${1!==p?"s":""}`,children:p})]},e.href))}),(0,a.jsxs)("div",{className:"sidebar-footer",children:[a.jsx("div",{className:"admin-info",children:a.jsx("span",{className:"admin-email",children:r?.email})}),a.jsx("button",{type:"button",className:"logout-btn",onClick:c,children:"Logout"})]})]}),(0,a.jsxs)("main",{className:"admin-main",children:[(0,a.jsxs)("header",{className:"admin-header",children:[a.jsx("button",{type:"button",className:"mobile-menu-btn",onClick:()=>h(!m),"aria-label":"Toggle menu",children:"☰"}),a.jsx("h1",{className:"page-title",children:l.find(e=>e.href===s)?.label||"Admin"})]}),a.jsx("div",{className:"admin-content",children:e})]}),x&&(0,a.jsxs)("div",{className:"new-order-toast",role:"alert",children:[a.jsx("span",{className:"new-order-toast-icon",children:"✓"}),(0,a.jsxs)("span",{className:"new-order-toast-text",children:["New order placed! ",p," pending order",1!==p?"s":""," need attention."]}),a.jsx("button",{type:"button",className:"new-order-toast-close",onClick:g,"aria-label":"Dismiss",children:"✕"})]})]}):null}},8796:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i});var a=r(326),t=r(7577),n=r(8866);function i(){let[e,s]=(0,t.useState)([]),[r,i]=(0,t.useState)(!0),[d,l]=(0,t.useState)(null),o=async(e,r)=>{if(confirm(`Delete user "${r}"? This cannot be undone.`))try{await n.Nq.deleteUser(e),s(s=>s.filter(s=>s._id!==e))}catch(e){alert(e.response?.data?.message||"Failed to delete user")}},c=e=>e?new Date(e).toLocaleDateString():"-";return r?a.jsx("div",{className:"loading-state",children:"Loading users..."}):d?a.jsx("div",{className:"error-state",children:d}):(0,a.jsxs)("div",{className:"users-page",children:[a.jsx("div",{className:"table-container-desktop",children:(0,a.jsxs)("table",{className:"admin-table",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Joined"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:0===e.length?a.jsx("tr",{children:a.jsx("td",{colSpan:6,children:"No users found."})}):e.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:e.name||"-"})}),a.jsx("td",{children:e.email||"-"}),a.jsx("td",{children:e.phone||"-"}),a.jsx("td",{children:a.jsx("span",{className:"badge badge-role",children:e.role||"user"})}),a.jsx("td",{children:c(e.createdAt)}),a.jsx("td",{children:a.jsx("button",{type:"button",className:"btn-sm btn-danger",onClick:()=>o(e._id,e.name),children:"Delete"})})]},e._id))})]})}),a.jsx("div",{className:"cards-container-mobile",children:0===e.length?a.jsx("div",{className:"empty-state",children:"No users found."}):e.map(e=>(0,a.jsxs)("div",{className:"user-card",children:[(0,a.jsxs)("div",{className:"card-header",children:[a.jsx("h3",{children:e.name||"-"}),a.jsx("span",{className:"badge badge-role",children:e.role||"user"})]}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"card-row",children:[a.jsx("span",{className:"card-label",children:"Email:"}),a.jsx("span",{className:"card-value",children:e.email||"-"})]}),(0,a.jsxs)("div",{className:"card-row",children:[a.jsx("span",{className:"card-label",children:"Phone:"}),a.jsx("span",{className:"card-value",children:e.phone||"-"})]}),(0,a.jsxs)("div",{className:"card-row",children:[a.jsx("span",{className:"card-label",children:"Joined:"}),a.jsx("span",{className:"card-value",children:c(e.createdAt)})]})]}),a.jsx("div",{className:"card-footer",children:a.jsx("button",{type:"button",className:"btn-sm btn-danger",onClick:()=>o(e._id,e.name),children:"Delete User"})})]},e._id))})]})}},8728:(e,s,r)=>{"use strict";r.d(s,{AuthProvider:()=>d,a:()=>l});var a=r(326),t=r(7577),n=r(8866);let i=(0,t.createContext)(null);function d({children:e}){let[s,r]=(0,t.useState)(null),[d,l]=(0,t.useState)(!0),o=(0,t.useCallback)(()=>null,[]),c=(0,t.useCallback)(()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),r(null)},[]);(0,t.useCallback)(async()=>{if(!o()){l(!1);return}try{let e=await n.Nq.getMe(),s=e?.data,a=s?.data;if(!s?.success||!a){c();return}let t=(a.role||"").toLowerCase();if("admin"!==t&&"superadmin"!==t){c();return}r(a),localStorage.setItem("adminUser",JSON.stringify(a))}catch{c()}finally{l(!1)}},[o,c]);let u=async(e,s)=>{try{let a=await n.Nq.login(e,s),t=a?.data,i=t?.data;if(console.log("Login Response:",{success:t?.success,role:i?.admin?.role}),!t?.success||!i?.token||!i?.admin)return{success:!1,message:t?.message??"Login failed"};let d=String(i.admin?.role||"").toLowerCase();if("admin"!==d&&"superadmin"!==d)return console.error("Access Denied: Invalid role",d),{success:!1,message:"Access denied. Admin or superadmin role required."};return localStorage.setItem("adminToken",i.token),localStorage.setItem("adminUser",JSON.stringify(i.admin)),r(i.admin),{success:!0}}catch(e){return{success:!1,message:e?.response?.data?.message??e?.message??"Login failed"}}},m=!!s&&("admin"===s.role||"superadmin"===s.role);return a.jsx(i.Provider,{value:{admin:s,loading:d,login:u,logout:c,isAuthenticated:m},children:e})}function l(){let e=(0,t.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},8866:(e,s,r)=>{"use strict";r.d(s,{Nq:()=>i});var a=r(4464);let t=process.env.NEXT_PUBLIC_API_URL||"https://rizwans-desi-ghee-backend.onrender.com/api",n=a.Z.create({baseURL:t,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>e),n.interceptors.response.use(e=>e,e=>(e.response?.status,Promise.reject(e)));let i={login:(e,s)=>n.post("/admin/auth/login",{email:e,password:s}),getMe:()=>n.get("/admin/auth/me"),getStats:()=>n.get("/admin/dashboard/stats"),getProducts:()=>n.get("/admin/products"),createProduct:e=>n.post("/admin/products",e),updateProduct:(e,s)=>n.put(`/admin/products/${e}`,s),deleteProduct:e=>n.delete(`/admin/products/${e}`),getOrders:e=>n.get("/admin/orders",{params:e}),updateOrderStatus:(e,s)=>n.put(`/admin/orders/${e}`,s),verifyOrder:(e,s)=>n.patch(`/admin/orders/${e}/verify`,{status:s}),deleteOrder:e=>n.delete(`/admin/orders/${e}`),getUsers:()=>n.get("/admin/users"),updateUser:(e,s)=>n.put(`/admin/users/${e}`,s),deleteUser:e=>n.delete(`/admin/users/${e}`)}},2146:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`C:\Users\sc\rizwans-desi-ghee\admin\src\app\(admin)\layout.jsx#default`)},5935:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`C:\Users\sc\rizwans-desi-ghee\admin\src\app\(admin)\users\page.jsx#default`)},1840:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>d,metadata:()=>i});var a=r(9510);r(4544);var t=r(8570);let n=(0,t.createProxy)(String.raw`C:\Users\sc\rizwans-desi-ghee\admin\src\context\AuthContext.jsx#AuthProvider`);(0,t.createProxy)(String.raw`C:\Users\sc\rizwans-desi-ghee\admin\src\context\AuthContext.jsx#useAuth`);let i={title:"Admin Panel - Rizwan's Desi Ghee",description:"Admin dashboard for managing e-commerce platform"};function d({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{children:a.jsx(n,{children:e})})})}},4544:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[294,496],()=>r(2328));module.exports=a})();