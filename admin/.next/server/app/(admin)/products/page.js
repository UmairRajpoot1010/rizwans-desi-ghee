(()=>{var e={};e.id=570,e.ids=[570],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},5483:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o}),t(4613),t(2146),t(5866),t(1840);var r=t(3191),a=t(8716),i=t(7922),n=t.n(i),l=t(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let o=["",{children:["(admin)",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4613)),"C:\\rizwans-desi-ghee\\admin\\src\\app\\(admin)\\products\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2146)),"C:\\rizwans-desi-ghee\\admin\\src\\app\\(admin)\\layout.jsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1840)),"C:\\rizwans-desi-ghee\\admin\\src\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\rizwans-desi-ghee\\admin\\src\\app\\(admin)\\products\\page.jsx"],u="/(admin)/products/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(admin)/products/page",pathname:"/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3080:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},2763:(e,s,t)=>{Promise.resolve().then(t.bind(t,1513))},9555:(e,s,t)=>{Promise.resolve().then(t.bind(t,3105))},9605:(e,s,t)=>{Promise.resolve().then(t.bind(t,8728))},1513:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(326),a=t(7577),i=t(5047),n=t(434),l=t(8728);let d=[{href:"/dashboard",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/products",label:"Products",icon:"\uD83D\uDCE6"},{href:"/orders",label:"Orders",icon:"\uD83D\uDED2"},{href:"/users",label:"Users",icon:"\uD83D\uDC65"}];function o({children:e}){(0,i.useRouter)();let s=(0,i.usePathname)(),{admin:t,loading:o,logout:c,isAuthenticated:u}=(0,l.a)(),[m,p]=(0,a.useState)(!1);return o?r.jsx("div",{className:"admin-loading",children:r.jsx("p",{children:"Loading..."})}):u?(0,r.jsxs)("div",{className:"admin-layout",children:[m&&r.jsx("div",{className:"sidebar-overlay",onClick:()=>p(!1),"aria-hidden":"true"}),(0,r.jsxs)("aside",{className:`sidebar ${m?"open":""}`,children:[(0,r.jsxs)("div",{className:"sidebar-header",children:[r.jsx("h2",{children:"Rizwan's Ghee"}),r.jsx("span",{className:"sidebar-subtitle",children:"Admin Panel"}),r.jsx("button",{type:"button",className:"sidebar-close-btn",onClick:()=>p(!1),"aria-label":"Close menu",children:"✕"})]}),r.jsx("nav",{className:"sidebar-nav",children:d.map(e=>(0,r.jsxs)(n.default,{href:e.href,className:s===e.href?"active":"",children:[r.jsx("span",{className:"nav-icon",children:e.icon}),r.jsx("span",{className:"nav-label",children:e.label})]},e.href))}),(0,r.jsxs)("div",{className:"sidebar-footer",children:[r.jsx("div",{className:"admin-info",children:r.jsx("span",{className:"admin-email",children:t?.email})}),r.jsx("button",{type:"button",className:"logout-btn",onClick:c,children:"Logout"})]})]}),(0,r.jsxs)("main",{className:"admin-main",children:[(0,r.jsxs)("header",{className:"admin-header",children:[r.jsx("button",{type:"button",className:"mobile-menu-btn",onClick:()=>p(!m),"aria-label":"Toggle menu",children:"☰"}),r.jsx("h1",{className:"page-title",children:d.find(e=>e.href===s)?.label||"Admin"})]}),r.jsx("div",{className:"admin-content",children:e})]})]}):null}},3105:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(326),a=t(7577),i=t(8866);function n({product:e,onClose:s,onSuccess:t}){let[n,l]=(0,a.useState)({name:"",description:"",price:"",category:"",stock:"0",isActive:!0,images:[]}),[d,o]=(0,a.useState)(""),[c,u]=(0,a.useState)([]),[m,p]=(0,a.useState)(""),[h,x]=(0,a.useState)(!1),g=e=>{let{name:s,value:t,type:r,checked:a}=e.target;l(e=>({...e,[s]:"checkbox"===r?a:t}))},j=e=>{u(s=>s.filter((s,t)=>t!==e)),l(s=>({...s,images:s.images.filter((s,t)=>t!==e)}))},b=async s=>{s.preventDefault(),p(""),x(!0);let r=n.images.length>0?n.images:d.split("\n").map(e=>e.trim()).filter(Boolean);if(0===r.length){p("At least one image is required"),x(!1);return}let a={name:n.name.trim(),description:n.description.trim(),price:parseFloat(n.price)||0,category:n.category.trim(),stock:parseInt(n.stock,10)||0,isActive:n.isActive,images:r};try{e?._id?await i.Nq.updateProduct(e._id,a):await i.Nq.createProduct(a),t?.()}catch(e){p(e.response?.data?.message||"Failed to save product")}finally{x(!1)}};return r.jsx("div",{className:"modal-overlay",onClick:s,children:(0,r.jsxs)("div",{className:"modal modal-large",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"modal-header",children:[r.jsx("h3",{children:e?"Edit Product":"Add Product"}),r.jsx("button",{type:"button",className:"modal-close",onClick:s,children:"\xd7"})]}),(0,r.jsxs)("form",{onSubmit:b,className:"modal-body",children:[m&&r.jsx("div",{className:"form-error",children:m}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{children:"Name *"}),r.jsx("input",{name:"name",value:n.name,onChange:g,required:!0,placeholder:"Product name"})]}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{children:"Description *"}),r.jsx("textarea",{name:"description",value:n.description,onChange:g,required:!0,rows:3,placeholder:"Product description"})]}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{children:"Price (₹) *"}),r.jsx("input",{type:"number",name:"price",value:n.price,onChange:g,required:!0,min:"0",step:"0.01"})]}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{children:"Stock"}),r.jsx("input",{type:"number",name:"stock",value:n.stock,onChange:g,min:"0"})]})]}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{children:"Category *"}),r.jsx("input",{name:"category",value:n.category,onChange:g,required:!0,placeholder:"e.g. Desi Ghee"})]}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{children:"Images *"}),(0,r.jsxs)("div",{className:"image-upload-section",children:[(0,r.jsxs)("div",{className:"image-upload-input",children:[r.jsx("input",{type:"file",multiple:!0,accept:"image/png,image/jpeg,image/jpg,image/gif,image/webp",onChange:e=>{let s=Array.from(e.target.files||[]);0!==s.length&&s.forEach(e=>{let s=new FileReader;s.onload=()=>{let e=String(s.result);u(s=>[...s,e]),l(s=>({...s,images:[...s.images,e]}))},s.readAsDataURL(e)})},id:"image-select",style:{display:"none"}}),r.jsx("button",{type:"button",className:"btn-upload",onClick:()=>document.getElementById("image-select").click(),children:"\uD83D\uDCC1 Choose Photos"}),r.jsx("small",{children:"Upload product images from your device (PNG, JPG, GIF, WebP)"})]}),c.length>0&&r.jsx("div",{className:"image-preview-grid",children:c.map((e,s)=>(0,r.jsxs)("div",{className:"image-preview-item",children:[r.jsx("img",{src:e,alt:`Preview ${s+1}`,style:{maxWidth:"100%",maxHeight:"150px",objectFit:"cover"}}),r.jsx("button",{type:"button",className:"btn-remove-image",onClick:()=>j(s),title:"Remove image",children:"✕"})]},s))})]})]}),r.jsx("div",{className:"form-group form-check",children:(0,r.jsxs)("label",{children:[r.jsx("input",{type:"checkbox",name:"isActive",checked:n.isActive,onChange:g}),"Active (visible to customers)"]})}),(0,r.jsxs)("div",{className:"modal-footer",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:s,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:h,children:h?"Saving...":e?"Update":"Create"})]})]})]})})}function l(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(!0),[d,o]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null),h=()=>{l(!0),i.Nq.getProducts().then(e=>{e.data?.success&&e.data?.data&&s(e.data.data)}).catch(e=>o(e.response?.data?.message||"Failed to load products")).finally(()=>l(!1))},x=e=>{p(e),u(!0)},g=()=>{u(!1),p(null),h()},j=async(e,s)=>{if(confirm(`Delete product "${s}"?`))try{await i.Nq.deleteProduct(e),h()}catch(e){alert(e.response?.data?.message||"Failed to delete")}};return t?r.jsx("div",{className:"loading-state",children:"Loading products..."}):d?r.jsx("div",{className:"error-state",children:d}):(0,r.jsxs)("div",{className:"products-page",children:[(0,r.jsxs)("div",{className:"page-header-responsive",children:[r.jsx("h2",{children:"Products"}),r.jsx("button",{type:"button",className:"btn-primary",onClick:()=>{p(null),u(!0)},children:"+ Add"})]}),r.jsx("div",{className:"table-container-desktop",children:(0,r.jsxs)("table",{className:"admin-table",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Category"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Stock"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:0===e.length?r.jsx("tr",{children:r.jsx("td",{colSpan:6,children:"No products yet. Add your first product."})}):e.map(e=>(0,r.jsxs)("tr",{onClick:()=>x(e),className:"clickable-row",style:{cursor:"pointer"},children:[r.jsx("td",{children:(0,r.jsxs)("div",{className:"product-cell",children:[e.images?.[0]&&r.jsx("img",{src:e.images[0],alt:"",className:"product-thumb"}),(0,r.jsxs)("div",{children:[r.jsx("strong",{children:e.name}),e.description&&(0,r.jsxs)("span",{className:"product-desc",children:[e.description.slice(0,50),"..."]})]})]})}),r.jsx("td",{children:e.category}),(0,r.jsxs)("td",{children:["₹",Number(e.price).toLocaleString()]}),r.jsx("td",{children:e.stock??0}),r.jsx("td",{children:r.jsx("span",{className:`badge ${e.isActive?"badge-success":"badge-muted"}`,children:e.isActive?"Active":"Inactive"})}),(0,r.jsxs)("td",{onClick:e=>e.stopPropagation(),children:[r.jsx("button",{type:"button",className:"btn-sm btn-edit",onClick:()=>x(e),children:"Edit"}),r.jsx("button",{type:"button",className:"btn-sm btn-danger",onClick:()=>j(e._id,e.name),children:"Delete"})]})]},e._id))})]})}),c&&r.jsx(n,{product:m,onClose:g,onSuccess:g})]})}},8728:(e,s,t)=>{"use strict";t.d(s,{AuthProvider:()=>l,a:()=>d});var r=t(326),a=t(7577),i=t(8866);let n=(0,a.createContext)(null);function l({children:e}){let[s,t]=(0,a.useState)(null),[l,d]=(0,a.useState)(!0),o=(0,a.useCallback)(()=>null,[]),c=(0,a.useCallback)(()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),t(null)},[]);(0,a.useCallback)(async()=>{if(!o()){d(!1);return}try{let e=await i.Nq.getMe(),s=e?.data,r=s?.data;if(!s?.success||!r){c();return}let a=(r.role||"").toLowerCase();if("admin"!==a&&"superadmin"!==a){c();return}t(r),localStorage.setItem("adminUser",JSON.stringify(r))}catch{c()}finally{d(!1)}},[o,c]);let u=async(e,s)=>{try{let r=await i.Nq.login(e,s),a=r?.data,n=a?.data;if(console.log("Login Response:",{success:a?.success,role:n?.admin?.role}),!a?.success||!n?.token||!n?.admin)return{success:!1,message:a?.message??"Login failed"};let l=String(n.admin?.role||"").toLowerCase();if("admin"!==l&&"superadmin"!==l)return console.error("Access Denied: Invalid role",l),{success:!1,message:"Access denied. Admin or superadmin role required."};return localStorage.setItem("adminToken",n.token),localStorage.setItem("adminUser",JSON.stringify(n.admin)),t(n.admin),{success:!0}}catch(e){return{success:!1,message:e?.response?.data?.message??e?.message??"Login failed"}}},m=!!s&&("admin"===s.role||"superadmin"===s.role);return r.jsx(n.Provider,{value:{admin:s,loading:l,login:u,logout:c,isAuthenticated:m},children:e})}function d(){let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},8866:(e,s,t)=>{"use strict";t.d(s,{Nq:()=>a});let r=t(4464).Z.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>e),r.interceptors.response.use(e=>e,e=>(e.response?.status,Promise.reject(e)));let a={login:(e,s)=>r.post("/admin/auth/login",{email:e,password:s}),getMe:()=>r.get("/admin/auth/me"),getStats:()=>r.get("/admin/dashboard/stats"),getProducts:()=>r.get("/admin/products"),createProduct:e=>r.post("/admin/products",e),updateProduct:(e,s)=>r.put(`/admin/products/${e}`,s),deleteProduct:e=>r.delete(`/admin/products/${e}`),getOrders:e=>r.get("/admin/orders",{params:e}),updateOrderStatus:(e,s)=>r.put(`/admin/orders/${e}`,s),verifyOrder:(e,s)=>r.patch(`/admin/orders/${e}/verify`,{status:s}),deleteOrder:e=>r.delete(`/admin/orders/${e}`),getUsers:()=>r.get("/admin/users"),updateUser:(e,s)=>r.put(`/admin/users/${e}`,s),deleteUser:e=>r.delete(`/admin/users/${e}`)}},2146:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\rizwans-desi-ghee\admin\src\app\(admin)\layout.jsx#default`)},4613:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\rizwans-desi-ghee\admin\src\app\(admin)\products\page.jsx#default`)},1840:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l,metadata:()=>n});var r=t(9510);t(4544);var a=t(8570);let i=(0,a.createProxy)(String.raw`C:\rizwans-desi-ghee\admin\src\context\AuthContext.jsx#AuthProvider`);(0,a.createProxy)(String.raw`C:\rizwans-desi-ghee\admin\src\context\AuthContext.jsx#useAuth`);let n={title:"Admin Panel - Rizwan's Desi Ghee",description:"Admin dashboard for managing e-commerce platform"};function l({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:r.jsx(i,{children:e})})})}},4544:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[294,496],()=>t(5483));module.exports=r})();